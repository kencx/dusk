package partials

import (
	"strconv"

	"github.com/kencx/dusk"
)

templ ItemSearch(path, target string) {
	<form
		hx-get={ path }
		hx-params="*"
		hx-target={ target }
		hx-swap="innerHTML"
		hx-trigger="input changed from:find #search delay:500ms"
	>
		<input id="search" name="itemSearch" placeholder="Search"/>
		<div class="spinner" aria-busy="true"></div>
	</form>
}

templ ItemSearchResults[T dusk.Pager](items T, err error) {
	if err == dusk.ErrNoRows {
		<p class="message">No results found!</p>
	} else if err != nil {
		<p class="message">Something went wrong, please try again.</p>
	} else {
		<div id="search__metadata" class="search__metadata">
			if items.TotalNo() == 1 {
				Showing 1 item
			} else {
				Showing <span id="item-counter">{ strconv.Itoa(items.LastNo()) }</span>
				of { strconv.Itoa(items.TotalNo()) } items
			}
		</div>
		{ children... }
	}
}
